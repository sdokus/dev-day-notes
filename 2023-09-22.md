# GOAL: Practice Writing Tests

## Approach:

- Read through documentation for Codeception
- Write a test class that:
  - Creates an event using the ORM
  - Changes some TEC settings
  - Tests for how the event is affected
  - Teardown the event

## Resources

- [Codeception Unit Tests](https://codeception.com/docs/UnitTests)
- [Codeception Commands](https://codeception.com/docs/reference/Commands) _confused about how to use while using slic_
- [Assertions](https://docs.phpunit.de/en/8.5/assertions.html)
- [Annotations](https://docs.phpunit.de/en/8.5/annotations.html)
- [SetUp and TearDown](https://docs.phpunit.de/en/8.5/fixtures.html#more-setup-than-teardown)

## Notes

- [Namespace](https://www.php.net/manual/en/language.namespaces.php) is an important part of tests because they help to avoid naming collisions across files and other PHP classes/functions/constants.
  - A file containing a namespace must declare the namespace at the top of the file before any other code
  - Essentially all about scope and being able to call different files and their classes through aliases
  - When importing using the `use` keyword, it needs to be in the outermost scope of the file (AKA not within a function). This is because the importing is done at compile time and not runtime, so it cannot be block scoped.
  - Without any namespace definition, all class and function definitions are placed into the global space - as it was in PHP before namespaces were supported. Prefixing a name with \ will specify that the name is required from the global space even in the context of the namespace.
- When writing tests, the number of variables created and used is important to consider for performance reasons - there usually is no reason to create more than 3 variables at a time

### Setting up a test

- If slic is not already set up and ready, navigate to the /plugin directory and run:
  - `slic here`
  - `slic use the-events-calendar`
  - `slic start`
  - `slic init the-events-calendar`
- Create a new file in `wp-content/plugins/the-events-calendar/tests/wpunit/TEC/Events` with the name of your testing class
- Declare the namespace `\TEC\Events` and import `Events_TestCase`:

```
<?php

namespace TEC\Events; // lets slic know the context of the file when running the tests

use Tribe\Events\Test\Testcases\Events_TestCase; // allows new test class to extend Events_TestCase, which extends Codeception's `WPTestCase`
```

- Declare the class where your tests will go:

```
class SamTest extends Events_TestCase {}
```
