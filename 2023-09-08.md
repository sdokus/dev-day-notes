# GOAL: Deepen Understanding of WP CLI

## Approach:

- Import 2 customer websites into 2 new environments
- Use WP CLI to modify home URL so the site can be viewed locally
- Pull info from db
  - Events
  - TEC Settings
  - License Key (PUE)

## Resources:

- Version Compare[https://www.php.net/manual/en/function.version-compare.php]
- Download Premium Plugins[https://gpldl.com/repository/download-premium-wordpress-plugins/]
- Plugin for pulling themes and plugins[https://wordpress.org/plugins/backwpup/]
- WP CLI[https://developer.wordpress.org/cli/commands/]
- Using WP CLI in Lando[https://docs.lando.dev/wordpress/tooling.html]

## Notes:

### Using database from customer (Modified from Victor)

1. Back up current database with command `lando wp db export backup`
2. Download the database file and put in the root of an existing site. This is in the same default place where the wp-config.php lives
3. Run the command `lando wp db clean --yes` to delete all the existing tables for the site
4. Run the command `lando wp db import [db_name].sql`
5. After it completes the import, open a database manager like phpMyAdmin or Adminer so you can see the table prefix is the default one. If not, edit the wp-config.php file and edit `$table_prefix = 'wp_';` for the correct prefix
   - For this I used DBeaver:
     1. Open DBeaver
     2. File > New > Database Connection
     3. Search and select 'MySQL'
     4. In the terminal, run the command `lando info` to see which port your external connection is running on
     5. In the DBeaver GUI, copy that port number and fill in 'database' 'username' and 'password' all with 'wordpress'
6. Using the following command as an example `lando wp search-replace 'http://customer-domain.com' 'https://stable-dev.lndo.site/` run it to modify all database records to point to your local domain
   - If you're unsure of the
7. If you don't have admin credentials for the site, use the following command to create your own admin user: wp `user create victor victor@tec.com --user_pass=lalala --role=administrator --allow-root`
8. You are ready to use the site locally and log in with your admin user

_Note:_ active plugins and themes should already be placed in the corresponding `wp-content/plugins` or `wp-content/themes` directories. Plugins that were active on the production site that are not present on the local installation will get automatically deactivated when you navigate to /wp-admin/plugins.php.
